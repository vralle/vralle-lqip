{"version":3,"file":"lqip.js","sources":["../node_modules/stackblur-canvas/dist/stackblur-es.js","../src/lqip.js"],"sourcesContent":["function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}\n* @module StackBlur\n* @version 0.5\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n\n  if (!img || !('naturalWidth' in img)) {\n    return;\n  }\n\n  var w = img.naturalWidth;\n  var h = img.naturalHeight;\n\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n\n  canvas.style.width = w + 'px';\n  canvas.style.height = h + 'px';\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0);\n\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method in processCanvasRGB(A) calls!');\n  }\n\n  var context = canvas.getContext('2d');\n\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var x, y, i, p, yp, yi, yw, rSum, gSum, bSum, aSum, rOutSum, gOutSum, bOutSum, aOutSum, rInSum, gInSum, bInSum, aInSum, pr, pg, pb, pa, rbs;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  yw = yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (y = 0; y < height; y++) {\n    rInSum = gInSum = bInSum = aInSum = rSum = gSum = bSum = aSum = 0;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    aOutSum = radiusPlus1 * (pa = pixels[yi + 3]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    aSum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      aSum += (stack.a = pa = pixels[p + 3]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      aInSum += pa;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi + 3] = pa = aSum * mulSum >> shgSum;\n\n      if (pa !== 0) {\n        pa = 255 / pa;\n        pixels[yi] = (rSum * mulSum >> shgSum) * pa;\n        pixels[yi + 1] = (gSum * mulSum >> shgSum) * pa;\n        pixels[yi + 2] = (bSum * mulSum >> shgSum) * pa;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      aInSum += stackIn.a = pixels[p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      aOutSum += pa = stackOut.a;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      aInSum -= pa;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    gInSum = bInSum = aInSum = rInSum = gSum = bSum = aSum = rSum = 0;\n    yi = x << 2;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    aOutSum = radiusPlus1 * (pa = pixels[yi + 3]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    aSum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      rSum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      aSum += (stack.a = pa = pixels[yi + 3]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      aInSum += pa;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p + 3] = pa = aSum * mulSum >> shgSum;\n\n      if (pa > 0) {\n        pa = 255 / pa;\n        pixels[p] = (rSum * mulSum >> shgSum) * pa;\n        pixels[p + 1] = (gSum * mulSum >> shgSum) * pa;\n        pixels[p + 2] = (bSum * mulSum >> shgSum) * pa;\n      } else {\n        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      rSum += rInSum += stackIn.r = pixels[p];\n      gSum += gInSum += stackIn.g = pixels[p + 1];\n      bSum += bInSum += stackIn.b = pixels[p + 2];\n      aSum += aInSum += stackIn.a = pixels[p + 3];\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      aOutSum += pa = stackOut.a;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      aInSum -= pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var x, y, i, p, yp, yi, yw, rSum, gSum, bSum, rOutSum, gOutSum, bOutSum, rInSum, gInSum, bInSum, pr, pg, pb, rbs;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  yw = yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (y = 0; y < height; y++) {\n    rInSum = gInSum = bInSum = rSum = gSum = bSum = 0;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >> shgSum;\n      pixels[yi + 1] = gSum * mulSum >> shgSum;\n      pixels[yi + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    gInSum = bInSum = rInSum = gSum = bSum = rSum = 0;\n    yi = x << 2;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      rSum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p] = rSum * mulSum >> shgSum;\n      pixels[p + 1] = gSum * mulSum >> shgSum;\n      pixels[p + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      rSum += rInSum += stackIn.r = pixels[p];\n      gSum += gInSum += stackIn.g = pixels[p + 1];\n      bSum += bInSum += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n *\n */\n\n\nvar BlurStack = function BlurStack() {\n  _classCallCheck(this, BlurStack);\n\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\n\nexport { BlurStack, processImage as image, processCanvasRGBA as canvasRGBA, processCanvasRGB as canvasRGB, processImageDataRGBA as imageDataRGBA, processImageDataRGB as imageDataRGB };\n","import { canvasRGB } from 'stackblur-canvas';\n\nconst lqipHeader = window.GaussholderHeader;\n\nconst lqip = function( img, lqipData ) {\n  const lqipWidth = parseInt( lqipData[ 1 ], 10 );\n  const lqipHeight = parseInt( lqipData[ 2 ], 10 );\n  let lqipImg;\n  let canvas;\n  let ctx;\n  let imgLoaded = false;\n\n  const createLqip = function() {\n    const arrayBufferToBase64 = function( buffer ) {\n      let binary = '';\n      const bytes = new Uint8Array( buffer );\n      const len = bytes.byteLength;\n      for ( let i = 0; i < len; i++ ) {\n        binary += String.fromCharCode( bytes[ i ] );\n      }\n      return window.btoa( binary );\n    };\n\n    const reconstituteImage = function() {\n      const lqipPart = lqipData[ 0 ];\n      const lqipTotal = atob( lqipHeader.header ) + atob( lqipPart );\n      const bytes = new Uint8Array( lqipTotal.length );\n      for ( let i = 0; i < lqipTotal.length; i++ ) {\n        bytes[ i ] = lqipTotal.charCodeAt( i );\n      }\n\n      // Poke the bits.\n      /* eslint-disable no-bitwise */\n      bytes[ lqipHeader.height_offset ] = ( ( lqipHeight >> 8 ) & 0xFF );\n      bytes[ lqipHeader.height_offset + 1 ] = ( lqipHeight & 0xFF );\n      bytes[ lqipHeader.length_offset ] = ( ( lqipWidth >> 8 ) & 0xFF );\n      bytes[ lqipHeader.length_offset + 1 ] = ( lqipWidth & 0xFF );\n      /* eslint-enable no-bitwise */\n\n      // Back to a full JPEG now.\n      return arrayBufferToBase64( bytes );\n    };\n\n    const onloadLqip = function() {\n      // Render only in viewport.\n      if ( lqipImg ) {\n        lqipImg.removeEventListener( 'load', onloadLqip );\n        lqipImg.removeEventListener( 'error', onloadLqip );\n      }\n      if ( ! imgLoaded ) {\n        img.style.backgroundRepeat = 'no-repeat';\n        img.style.backgroundSize = 'cover';\n        if ( canvas ) {\n          ctx.drawImage( lqipImg, 0, 0, lqipWidth, lqipHeight );\n          canvasRGB( canvas, 0, 0, lqipWidth, lqipHeight, 1 );\n          img.style.backgroundImage = 'url(\"' + canvas.toDataURL() + '\")';\n          img.classList.add( 'guessholder-loaded' );\n        }\n        // Use modern toBlob? toDataURL has performance issues.\n        // if ( canvas.toBlob ) {\n        //   canvas.toBlob( function( blob ) {\n        //     const url = window.URL.createObjectURL( blob );\n        //     // window.URL.revokeObjectURL( url );\n        //     img.style.backgroundImage = 'url(\"' + url + '\")';\n        //   } );\n        // }\n      }\n      img.classList.remove( 'guessholder-loading' );\n    };\n\n    // Use original LQIP sizes and background-size=cover for performance reasons.\n    canvas = document.createElement( 'canvas' );\n    canvas.width = lqipWidth;\n    canvas.height = lqipHeight;\n    ctx = canvas.getContext( '2d', { alpha: false } );\n    // Ensure smoothing is off\n    // ctx.mozImageSmoothingEnabled = false;\n    // ctx.webkitImageSmoothingEnabled = false;\n    // ctx.msImageSmoothingEnabled = false;\n    // ctx.imageSmoothingEnabled = false;\n\n    lqipImg = new Image();\n    lqipImg.addEventListener( 'load', onloadLqip );\n    lqipImg.addEventListener( 'error', onloadLqip );\n    lqipImg.src = 'data:image/jpg;base64,' + reconstituteImage();\n  };\n\n  const remove = function() {\n    lqipImg = null;\n    ctx = null;\n    canvas = null;\n    img.style.backgroundImage = '';\n    img.style.backgroundRepeat = '';\n    img.style.backgroundSize = '';\n    img.classList.add( 'guessholder-removed' );\n    img.classList.remove( 'guessholder-loading' );\n    img.classList.remove( 'guessholder-loaded' );\n    if ( img.style.length == 0 ) {\n      img.removeAttribute( 'style' );\n    }\n  };\n\n  const lazyloaded = function() {\n    img.removeEventListener( 'lazyloaded', lazyloaded );\n    imgLoaded = true;\n    setTimeout( remove, 800 );\n  };\n\n  createLqip();\n\n  // Render original image only in viewport.\n  img.setAttribute( 'data-expand', -1 );\n  img.addEventListener( 'lazyloaded', lazyloaded );\n};\n\nwindow.addEventListener( 'lazybeforeunveil', function( e ) {\n  const img = e.target;\n  const lqipData = img.getAttribute( 'data-gaussholder' );\n  if ( lqipData ) {\n    lqip( img, lqipData.split( ',' ) );\n  }\n} );\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","mulTable","shgTable","getImageDataFromCanvas","canvas","topX","topY","width","height","document","getElementById","context","getContext","getImageData","e","Error","processCanvasRGB","radius","isNaN","imageData","processImageDataRGB","putImageData","pixels","data","x","y","i","p","yp","yi","yw","rSum","gSum","bSum","rOutSum","gOutSum","bOutSum","rInSum","gInSum","bInSum","pr","pg","pb","rbs","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","stackEnd","next","stackIn","stackOut","mulSum","shgSum","r","g","b","a","lqipHeader","window","GaussholderHeader","lqip","img","lqipData","lqipWidth","parseInt","lqipHeight","lqipImg","ctx","imgLoaded","createLqip","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","reconstituteImage","lqipPart","lqipTotal","atob","header","length","charCodeAt","height_offset","length_offset","onloadLqip","removeEventListener","style","backgroundRepeat","backgroundSize","drawImage","canvasRGB","backgroundImage","toDataURL","classList","add","remove","createElement","alpha","Image","addEventListener","src","removeAttribute","lazyloaded","setTimeout","setAttribute","target","getAttribute","split"],"mappings":"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"}